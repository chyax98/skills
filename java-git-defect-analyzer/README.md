# Java Git Defect Analyzer

> åŸºäºéœ€æ±‚æ–‡æ¡£å¯¹æ¯”çš„ Java ä»£ç ç¼ºé™·åˆ†æå·¥å…·

ä¸€ä¸ªå¼ºå¤§çš„ Claude Skill,ç”¨äºåˆ†æ Java é¡¹ç›®çš„ Git æäº¤,è¯†åˆ«åŠŸèƒ½ç¼ºé™·ã€é«˜å½±å“ Bug å’Œä»£ç è´¨é‡é—®é¢˜ã€‚æ ¸å¿ƒç‰¹æ€§æ˜¯**éœ€æ±‚é©±åŠ¨åˆ†æ**â€”â€”å¯¹æ¯”éœ€æ±‚æ–‡æ¡£ä¸ä»£ç å®ç°,ç¡®ä¿åŠŸèƒ½æ­£ç¡®æ€§ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¯ åŠŸèƒ½ç¼ºé™·æ£€æµ‹ (PRIMARY)
- **åŠŸèƒ½å®Œæ•´æ€§éªŒè¯**: æ£€æŸ¥éœ€æ±‚åŠŸèƒ½æ˜¯å¦å®Œå…¨å®ç°
- **ä¸šåŠ¡é€»è¾‘éªŒè¯**: å¯¹æ¯”ä»£ç æ‰§è¡Œæµç¨‹ä¸éœ€æ±‚æè¿°
- **å®ç°åå·®è¯†åˆ«**: å‘ç°ä»£ç è¡Œä¸ºä¸éœ€æ±‚ä¸ç¬¦çš„åœ°æ–¹
- **éœ€æ±‚è¦†ç›–ç‡åˆ†æ**: ç”Ÿæˆéœ€æ±‚å®ç°è¦†ç›–çŸ©é˜µ

### ğŸ”´ é«˜å½±å“ç¼ºé™·æ£€æµ‹
- **NPE é£é™©**: æœªæ£€æŸ¥ null çš„æ–¹æ³•è°ƒç”¨
- **èµ„æºæ³„æ¼**: æœªå…³é—­çš„æ•°æ®åº“è¿æ¥ã€æ–‡ä»¶æµ
- **SQL æ³¨å…¥**: å­—ç¬¦ä¸²æ‹¼æ¥æ„é€  SQL æŸ¥è¯¢
- **ç¡¬ç¼–ç å¯†é’¥**: å¯†ç ã€API å¯†é’¥ç¡¬ç¼–ç åœ¨ä»£ç ä¸­
- **å¹¶å‘é—®é¢˜**: åŒé‡æ£€æŸ¥é”å®šã€ç«æ€æ¡ä»¶

### ğŸ“Š æ™ºèƒ½ä¼˜å…ˆçº§åˆ†ç±»
- **ğŸ”´ CRITICAL**: åŠŸèƒ½ç¼ºé™·ã€ä¸¥é‡å®‰å…¨é—®é¢˜ â†’ é˜»æ­¢å‘å¸ƒ
- **ğŸŸ  HIGH**: åŠŸèƒ½åå·®ã€é«˜å½±å“ Bug â†’ åˆå¹¶å‰ä¿®å¤
- **ğŸŸ¡ MEDIUM**: ä¸­ç­‰å½±å“é—®é¢˜ â†’ ä¸‹ä¸€è¿­ä»£
- **ğŸŸ¢ LOW**: ä»£ç è´¨é‡é—®é¢˜ â†’ æŠ€æœ¯å€ºåŠ¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

1. å°†æ­¤ Skill å¤åˆ¶åˆ° Claude Skills ç›®å½•:
   ```bash
   cp -r java-git-defect-analyzer ~/.claude/skills/
   ```

2. ç¡®ä¿ Python 3.8+ å·²å®‰è£…:
   ```bash
   python3 --version
   ```

3. å®‰è£…ä¾èµ– (å¯é€‰,è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥):
   ```bash
   pip install GitPython
   ```

### åŸºæœ¬ä½¿ç”¨

#### 1. è§¦å‘ Skill

åœ¨ Claude Code ä¸­è¾“å…¥:
```
review-java
```

#### 2. æä¾›è¾“å…¥

Claude ä¼šè¯·æ±‚ä»¥ä¸‹ä¿¡æ¯:

**å¿…éœ€è¾“å…¥**:
- **éœ€æ±‚æ–‡æ¡£**: æ–‡ä»¶è·¯å¾„æˆ–ç›´æ¥ç²˜è´´éœ€æ±‚æ–‡æœ¬
- **Git Commit**: commit hash æˆ– `HEAD` (é»˜è®¤)

**ç¤ºä¾‹äº¤äº’**:
```
You: review-java

Claude: è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯:
        1. éœ€æ±‚æ–‡æ¡£ (æ–‡ä»¶è·¯å¾„æˆ–ç›´æ¥ç²˜è´´)
        2. Git commit reference (é»˜è®¤: HEAD)

You: éœ€æ±‚æ–‡æ¡£: docs/feature-login.md
     Commit: HEAD

Claude: [å¼€å§‹åˆ†æ...]
```

#### 3. æŸ¥çœ‹åˆ†ææŠ¥å‘Š

Claude ä¼šç”Ÿæˆè¯¦ç»†çš„ Markdown æŠ¥å‘Š,åŒ…å«:
- æ‰§è¡Œæ‘˜è¦ (æ€»é—®é¢˜æ•°ã€ä¸¥é‡ç¨‹åº¦åˆ†å¸ƒ)
- åŠŸèƒ½ç¼ºé™·è¯¦ç»†åˆ—è¡¨ (å¸¦ä¿®å¤å»ºè®®)
- é«˜å½±å“ Bug åˆ—è¡¨ (å¸¦ä»£ç ç¤ºä¾‹)
- éœ€æ±‚è¦†ç›–ç‡åˆ†æè¡¨

## ğŸ“‹ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: åŠŸèƒ½ç¼ºå¤±æ£€æµ‹

**éœ€æ±‚æ–‡æ¡£** (`feature-login.md`):
```markdown
# ç”¨æˆ·ç™»å½•åŠŸèƒ½

## åŠŸèƒ½è¦æ±‚
1. æ”¯æŒæ‰‹æœºå·å’Œé‚®ç®±ä¸¤ç§ç™»å½•æ–¹å¼
2. ç™»å½•æˆåŠŸåè®°å½•ç™»å½•æ—¥å¿— (æ—¶é—´ã€IPã€è®¾å¤‡)
3. å‘é€ç™»å½•é€šçŸ¥é‚®ä»¶
```

**Git Commit**: å®ç°äº†ç™»å½•é€»è¾‘,ä½†ç¼ºå°‘æ—¥å¿—è®°å½•

**åˆ†æç»“æœ**:
```markdown
## ğŸ”´ CRITICAL - åŠŸèƒ½ç¼ºå¤±

### ç¼ºå¤±åŠŸèƒ½: ç™»å½•æ—¥å¿—è®°å½•
- **Requirement**: ç™»å½•æˆåŠŸåè®°å½•ç™»å½•æ—¥å¿— (æ—¶é—´ã€IPã€è®¾å¤‡)
- **Implementation Status**: âŒ å®Œå…¨ç¼ºå¤±
- **Impact**: æ— æ³•è¿½è¸ªç”¨æˆ·ç™»å½•è¡Œä¸º,å½±å“å®‰å…¨å®¡è®¡
- **Location**: `UserController.java:45`
- **Fix Suggestion**:
  ```java
  @PostMapping("/login")
  public ResponseEntity<UserVO> login(@RequestBody LoginRequest request) {
      User user = authService.authenticate(request);

      // âœ… æ·»åŠ æ—¥å¿—è®°å½•
      LoginLog log = new LoginLog();
      log.setUserId(user.getId());
      log.setLoginTime(LocalDateTime.now());
      log.setIpAddress(request.getRemoteAddr());
      log.setDeviceInfo(request.getHeader("User-Agent"));
      loginLogService.save(log);

      return ResponseEntity.ok(userMapper.toVO(user));
  }
  ```
```

---

### ç¤ºä¾‹ 2: é«˜å½±å“ Bug æ£€æµ‹

**ä»£ç æäº¤**: æ–°å¢ç”¨æˆ·æŸ¥è¯¢åŠŸèƒ½

**åˆ†æç»“æœ**:
```markdown
## ğŸŸ  HIGH - NPE é£é™©

### NPE é£é™©: æœªæ£€æŸ¥ null
- **Type**: NPE Risk
- **Location**: `UserService.java:23`
- **Problem**: `findById()` å¯èƒ½è¿”å› null, ç›´æ¥è°ƒç”¨ `getUsername()` ä¼šæŠ›å‡º NPE
- **Current Code**:
  ```java
  public String getUserById(Long id) {
      User user = userRepository.findById(id);
      return user.getUsername(); // âŒ NPE Risk
  }
  ```
- **Fix Suggestion**:
  ```java
  public String getUserById(Long id) {
      User user = userRepository.findById(id);
      if (user == null) {
          throw new UserNotFoundException("User not found: " + id);
      }
      return user.getUsername();
  }
  ```
```

---

### ç¤ºä¾‹ 3: éœ€æ±‚è¦†ç›–ç‡åˆ†æ

**åˆ†æç»“æœ**:
```markdown
## Requirement Coverage Analysis

| éœ€æ±‚åŠŸèƒ½ç‚¹ | å®ç°çŠ¶æ€ | é—®é¢˜è¯´æ˜ |
|-----------|---------|---------|
| æ‰‹æœºå·ç™»å½• | âœ… å®Œæ•´å®ç° | - |
| é‚®ç®±ç™»å½• | âš ï¸ éƒ¨åˆ†å®ç° | ç¼ºå°‘é‚®ç®±æ ¼å¼éªŒè¯ |
| ç™»å½•æ—¥å¿—è®°å½• | âŒ ç¼ºå¤± | æœªå®ç°æ—¥å¿—è®°å½•é€»è¾‘ |
| ç™»å½•é€šçŸ¥é‚®ä»¶ | âŒ ç¼ºå¤± | æœªå®ç°é‚®ä»¶å‘é€ |

**Coverage Score**: 2.5/10
```

## ğŸ› ï¸ é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰ä¼˜å…ˆçº§é…ç½®

ç¼–è¾‘ `assets/priority_matrix.json` è°ƒæ•´ä¸¥é‡ç¨‹åº¦è¯„åˆ†:

```json
{
  "defect_pattern_mapping": {
    "functional_defects": {
      "missing_functionality": {
        "severity": "CRITICAL",
        "score": 10
      }
    }
  }
}
```

### æ‰©å±•ç¼ºé™·æ£€æµ‹è§„åˆ™

åœ¨ `references/` ç›®å½•æ·»åŠ æ–°çš„ç¼ºé™·æ¨¡å¼:

1. ç¼–è¾‘ `references/functional_defect_patterns.md`
2. æ·»åŠ æ–°æ¨¡å¼å®šä¹‰:
   ```markdown
   ## 7. æ–°ç¼ºé™·ç±»å‹

   ### å®šä¹‰
   ...

   ### æ£€æµ‹è§„åˆ™
   ...
   ```

3. æ›´æ–° `scripts/defect_detector.py` æ·»åŠ æ£€æµ‹é€»è¾‘

### åˆ†æç‰¹å®šæäº¤èŒƒå›´

```bash
# åˆ†ææœ€è¿‘ 5 æ¬¡æäº¤
python scripts/analyze_commit.py HEAD~5..HEAD

# åˆ†æç‰¹å®šåˆ†æ”¯
python scripts/analyze_commit.py feature/login

# å¯¹æ¯”ä¸¤ä¸ªæäº¤
python scripts/analyze_commit.py abc123..def456
```

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
java-git-defect-analyzer/
â”œâ”€â”€ SKILL.md                        # Claude æ ¸å¿ƒæŒ‡ä»¤æ–‡ä»¶
â”œâ”€â”€ README.md                       # æœ¬æ–‡æ¡£
â”œâ”€â”€ LICENSE.txt                     # Apache 2.0 è®¸å¯è¯
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ analyze_commit.py          # Git æäº¤åˆ†æå¼•æ“
â”‚   â”œâ”€â”€ requirement_matcher.py     # éœ€æ±‚åŒ¹é…åˆ†æå™¨
â”‚   â””â”€â”€ defect_detector.py         # ç¼ºé™·æ£€æµ‹å¼•æ“
â”œâ”€â”€ references/
â”‚   â”œâ”€â”€ functional_defect_patterns.md    # åŠŸèƒ½ç¼ºé™·æ¨¡å¼åº“
â”‚   â”œâ”€â”€ requirement_checklist.md         # éœ€æ±‚éªŒè¯æ¸…å•
â”‚   â”œâ”€â”€ critical_bugs.md                 # é«˜å½±å“ Bug æ£€æµ‹è§„åˆ™
â”‚   â””â”€â”€ low_priority_issues.md           # ä½ä¼˜å…ˆçº§é—®é¢˜å‚è€ƒ
â””â”€â”€ assets/
    â””â”€â”€ priority_matrix.json        # ä¼˜å…ˆçº§è¯„åˆ†é…ç½®
```

## ğŸ¯ æœ€ä½³å®è·µ

### âœ… æ¨èåœºæ™¯

1. **Pre-merge PR Review**: åˆå¹¶å‰éªŒè¯åŠŸèƒ½å®Œæ•´æ€§
2. **Feature Acceptance**: éªŒæ”¶æ–°åŠŸèƒ½æ˜¯å¦ç¬¦åˆéœ€æ±‚
3. **Sprint Review**: è¯„ä¼°ä»£ç è´¨é‡å’ŒæŠ€æœ¯å€ºåŠ¡
4. **Refactoring Verification**: ç¡®ä¿é‡æ„æœªç ´ååŠŸèƒ½

### âš ï¸ ä½¿ç”¨å»ºè®®

1. **æä¾›æ¸…æ™°çš„éœ€æ±‚æ–‡æ¡£**: è¯¦ç»†çš„éœ€æ±‚æè¿°èƒ½æé«˜åˆ†æå‡†ç¡®æ€§
2. **èšç„¦å•ä¸€åŠŸèƒ½çš„æäº¤**: åˆ†æèŒƒå›´è¿‡å¤§ä¼šé™ä½ç»“æœå¯è¯»æ€§
3. **ç»“åˆäººå·¥ Review**: è‡ªåŠ¨åˆ†æå¯èƒ½æœ‰è¯¯æŠ¥,éœ€äººå·¥éªŒè¯
4. **æŒç»­ä½¿ç”¨è¿½è¸ªè¶‹åŠ¿**: åœ¨å¼€å‘è¿‡ç¨‹ä¸­æŒç»­ä½¿ç”¨,è€Œéä»…åœ¨æœ€ç»ˆå®¡æŸ¥

### ğŸš« ä¸é€‚ç”¨åœºæ™¯

- æ²¡æœ‰æ˜ç¡®éœ€æ±‚æ–‡æ¡£çš„æ¢ç´¢æ€§å¼€å‘
- çº¯é‡æ„æäº¤ (æ— åŠŸèƒ½å˜æ›´)
- é…ç½®æ–‡ä»¶ä¿®æ”¹

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜: è„šæœ¬æ‰§è¡Œå¤±è´¥

**é”™è¯¯**: `ModuleNotFoundError: No module named 'git'`

**è§£å†³**:
```bash
pip install GitPython
```

---

### é—®é¢˜: Git å‘½ä»¤æ‰¾ä¸åˆ°

**é”™è¯¯**: `command not found: git`

**è§£å†³**: ç¡®ä¿ Git å·²å®‰è£…å¹¶åœ¨ PATH ä¸­
```bash
# macOS
brew install git

# Ubuntu/Debian
sudo apt-get install git
```

---

### é—®é¢˜: éœ€æ±‚åŒ¹é…ä¸å‡†ç¡®

**åŸå› **: éœ€æ±‚æ–‡æ¡£æ ¼å¼ä¸æ¸…æ™°æˆ–å…³é”®è¯è¿‡å°‘

**æ”¹è¿›å»ºè®®**:
- ä½¿ç”¨æ˜ç¡®çš„æ“ä½œåŠ¨è¯ (è®°å½•ã€å‘é€ã€éªŒè¯ã€ç”Ÿæˆ)
- é‡‡ç”¨ç»“æ„åŒ–æ ¼å¼ (Markdown æ ‡é¢˜ã€ç¼–å·åˆ—è¡¨)
- é¿å…æ¨¡ç³Šæè¿°,ä½¿ç”¨å…·ä½“åŠŸèƒ½ç‚¹

---

### é—®é¢˜: è¯¯æŠ¥è¿‡å¤š

**åŸå› **: é™æ€åˆ†æè§„åˆ™è¿‡äºä¸¥æ ¼

**è§£å†³**:
1. ç¼–è¾‘ `assets/priority_matrix.json` è°ƒæ•´è¯„åˆ†æƒé‡
2. åœ¨ `references/` æ–‡æ¡£ä¸­æ·»åŠ ä¾‹å¤–è¯´æ˜
3. ç»“åˆäººå·¥åˆ¤æ–­,ç­›é€‰çœŸå®é—®é¢˜

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®æ–°çš„ç¼ºé™·æ£€æµ‹æ¨¡å¼!

1. Fork æœ¬ Skill
2. åœ¨ `references/` ä¸­æ·»åŠ æ–°æ¨¡å¼æ–‡æ¡£
3. åœ¨ `scripts/defect_detector.py` ä¸­å®ç°æ£€æµ‹é€»è¾‘
4. æäº¤ Pull Request

## ğŸ“„ è®¸å¯è¯

Apache License 2.0

## ğŸ™‹ å¸¸è§é—®é¢˜

### Q1: è¿™ä¸ª Skill èƒ½å®Œå…¨æ›¿ä»£äººå·¥ä»£ç å®¡æŸ¥å—?

**A**: ä¸èƒ½ã€‚è¿™æ˜¯ä¸€ä¸ª**è¾…åŠ©å·¥å…·**,èƒ½è‡ªåŠ¨å‘ç°å¸¸è§é—®é¢˜,ä½†ä¸èƒ½æ›¿ä»£äººå·¥å®¡æŸ¥çš„ä¸Šä¸‹æ–‡ç†è§£å’Œç»éªŒåˆ¤æ–­ã€‚æœ€ä½³å®è·µæ˜¯å°†è‡ªåŠ¨åˆ†æç»“æœä½œä¸º Review çš„èµ·ç‚¹ã€‚

### Q2: åˆ†æéœ€è¦å¤šé•¿æ—¶é—´?

**A**: å–å†³äºæäº¤è§„æ¨¡:
- å°å‹æäº¤ (1-3 æ–‡ä»¶): < 10 ç§’
- ä¸­å‹æäº¤ (5-10 æ–‡ä»¶): 30 ç§’ - 1 åˆ†é’Ÿ
- å¤§å‹æäº¤ (>20 æ–‡ä»¶): 2-5 åˆ†é’Ÿ

### Q3: æ”¯æŒå…¶ä»–ç¼–ç¨‹è¯­è¨€å—?

**A**: å½“å‰ç‰ˆæœ¬ä¸“æ³¨äº Javaã€‚å¦‚éœ€æ”¯æŒå…¶ä»–è¯­è¨€ (Python, JavaScript, Go),å¯ä»¥:
1. å¤åˆ¶ Skill å¹¶é‡å‘½å
2. ä¿®æ”¹ `scripts/` ä¸­çš„æ£€æµ‹è§„åˆ™
3. æ›´æ–° `references/` ä¸­çš„è¯­è¨€ç‰¹å®šæ¨¡å¼

### Q4: å¦‚ä½•é›†æˆåˆ° CI/CD æµç¨‹?

**A**: å¯ä»¥åœ¨ CI ä¸­è°ƒç”¨è„šæœ¬:
```yaml
# .github/workflows/code-review.yml
- name: Analyze Code Quality
  run: |
    python scripts/analyze_commit.py ${{ github.sha }} > report.json
    python scripts/requirement_matcher.py --requirement docs/requirements.md --commit ${{ github.sha }}
```

### Q5: éœ€æ±‚æ–‡æ¡£å¿…é¡»æ˜¯ Markdown æ ¼å¼å—?

**A**: ä¸æ˜¯å¿…é¡»çš„ã€‚æ”¯æŒ:
- Markdown (.md)
- çº¯æ–‡æœ¬ (.txt)
- ç›´æ¥ç²˜è´´çš„æ–‡æœ¬

å…³é”®æ˜¯å†…å®¹ç»“æ„æ¸…æ™°,ä½¿ç”¨æ˜ç¡®çš„åŠŸèƒ½æè¿°ã€‚

## ğŸ“ æ”¯æŒ

é‡åˆ°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®?
- æäº¤ Issue
- æŸ¥çœ‹ `SKILL.md` äº†è§£è¯¦ç»†ç”¨æ³•
- å‚è€ƒ `references/` ä¸­çš„æ¨¡å¼åº“

---

**Happy Coding! è®©æ¯ä¸€æ¬¡æäº¤éƒ½ç¬¦åˆéœ€æ±‚è§„æ ¼!** ğŸš€
